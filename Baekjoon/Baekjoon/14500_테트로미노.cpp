#include<cstdio>
using namespace std;
int ans[500][500];
int block[19][3][2] = {
	{ { 0,1 },{ 0,2 },{ 0,3 } },
{ { 1,0 },{ 2,0 },{ 3,0 } },
{ { 1,0 },{ 1,1 },{ 1,2 } },
{ { 0,1 },{ 1,0 },{ 2,0 } },
{ { 0,1 },{ 0,2 },{ 1,2 } },
{ { 1,0 },{ 2,0 },{ 2,-1 } },
{ { 0,1 },{ 0,2 },{ -1,2 } },
{ { 1,0 },{ 2,0 },{ 2,1 } },
{ { 0,1 },{ 0,2 },{ 1,0 } },
{ { 0,1 },{ 1,1 },{ 2,1 } },
{ { 0,1 },{ 1,0 },{ 1,1 } },
{ { 0,1 },{ -1,1 },{ -1,2 } },
{ { 1,0 },{ 1,1 },{ 2,1 } },
{ { 0,1 },{ 1,1 },{ 1,2 } },
{ { 1,0 },{ 1,-1 },{ 2,-1 } },
{ { 0,1 },{ 0,2 },{ -1,1 } },
{ { 0,1 },{ 0,2 },{ 1,1 } },
{ { 1,0 },{ 2,0 },{ 1,1 } },
{ { 1,0 },{ 2,0 },{ 1,-1 } },
};
int main() {
	int n, m;
	scanf("%d %d", &n, &m);
	for (int i = 0; i<n; i++) {
		for (int j = 0; j<m; j++) {
			scanf("%d", &ans[i][j]);
		}
	}
	int res = 0;
	for (int i = 0; i<n; i++) {
		for (int j = 0; j<m; j++) {
			for (int k = 0; k<19; k++) {
				bool ok = true;
				int sum = ans[i][j];
				for (int l = 0; l<3; l++) {
					int x = i + block[k][l][0];
					int y = j + block[k][l][1];
					if (0 <= x && x < n && 0 <= y && y < m) {
						sum += ans[x][y];
					}
					else {
						ok = false;
						break;
					}
				}
				if (ok && res < sum) {
					res = sum;
				}
			}
		}
	}
	printf("%d", res);
	return 0;
}